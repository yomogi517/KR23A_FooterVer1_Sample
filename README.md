# 交流ロボコンA　Nucleo F446RE フッター基板ver2　サンプルプログラム
ver1はQEIの仕様に敗北したので没になりました。
<br>


## 基板の概要
### 搭載予定のもの
- リミットスイッチ*5
  - XAコネクタ２ピン
- ロータリーエンコーダ*6
  - AMT102-v X相未使用
  - XAコネクタ４ピン
- デバック用LED*5

<br>

### 使用しているピン
|機能|ピン番号|
| :--: | :--: |
|リミットスイッチ１|PC_4|
|リミットスイッチ２|PB_15|
|リミットスイッチ３|PB_12|
|リミットスイッチ４|PC_5|
|リミットスイッチ５|PC_8|
|ロータリーエンコーダ１|A相 : PD_2  B相 : PC_11|
|ロータリーエンコーダ２|A相 : PC_10 B相 : PC_12|
|ロータリーエンコーダ３|A相 : PA_13 B相 : PA_14|
|ロータリーエンコーダ４|A相 : PA_15 B相 : PB_7 |
|ロータリーエンコーダ５|A相 : PH_0  B相 : PH_1 |
|ロータリーエンコーダ６|A相 : PC_3  B相 : PA_4 |
|LED１|PA_9|
|LED２|PA_8|
|LED３|PB_10|
|LED４|PB_4|
|LED５|PB_5|

<br>

## プログラムの概要
mbedOSのクラスの一つである[Thread](https://os.mbed.com/docs/mbed-os/v6.15/apis/thread.html)クラスを用いて並列処理をしています。
- main関数
    - コントローラの信号またはリミットスイッチの信号に応じてLED点灯
- thread1
    - デバック用のprintfを100msごとに出力
- thread2
    - ロータリーエンコーダの値を取得
    - 取得した値をもとに角度を算出